(function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.2"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showMillisec:!1,showTimezone:!1,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:!1,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneIso8601:!1,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec"],control:null,setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(a,b){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],a,b,tp_inst):void 0},onChangeMonthYear:function(a,b,c){tp_inst._updateDateTime(c),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],a,b,c,tp_inst)},onClose:function(a,b){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(b),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],a,b,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=o[i]||null);if(tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(a){return a.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(a){return a.toUpperCase()}),"string"==typeof tp_inst._defaults.controlType?(void 0===$.fn[tp_inst._defaults.controlType]&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType,null===tp_inst._defaults.timezoneList){var timezoneList=["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"];tp_inst._defaults.timezoneIso8601&&(timezoneList=$.map(timezoneList,function(a){return"+0000"==a?"Z":a.substring(0,3)+":"+a.substring(3)})),tp_inst._defaults.timezoneList=timezoneList}return tp_inst.timezone=tp_inst._defaults.timezone,tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(a){var b=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(b),this._limitMinMaxDateTime(a,!1),this._injectTimePicker()},_parseTime:function(a,b){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),b||!this._defaults.timeOnly){var c=$.datepicker._get(this.inst,"dateFormat");try{var d=parseDateTimeInternal(c,this._defaults.timeFormat,a,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!d.timeObj)return!1;$.extend(this,d.timeObj)}catch(e){return $.timepicker.log("Error parsing the date/time string: "+e+"\ndate/time string = "+a+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+c),!1}return!0}var f=$.datepicker.parseTime(this._defaults.timeFormat,a,this._defaults);return f?($.extend(this,f),!0):!1},_injectTimePicker:function(){var a=this.inst.dpDiv,b=this.inst.settings,c=this,d="",e="",f={},g={},h=null;if(0===a.find("div.ui-timepicker-div").length&&b.showTimepicker){for(var i=' style="display:none;"',j='<div class="ui-timepicker-div'+(b.isRTL?" ui-timepicker-rtl":"")+'"><dl>'+'<dt class="ui_tpicker_time_label"'+(b.showTime?"":i)+">"+b.timeText+"</dt>"+'<dd class="ui_tpicker_time"'+(b.showTime?"":i)+"></dd>",k=0,l=this.units.length;l>k;k++){if(d=this.units[k],e=d.substr(0,1).toUpperCase()+d.substr(1),f[d]=parseInt(b[d+"Max"]-(b[d+"Max"]-b[d+"Min"])%b["step"+e],10),g[d]=0,j+='<dt class="ui_tpicker_'+d+'_label"'+(b["show"+e]?"":i)+">"+b[d+"Text"]+"</dt>"+'<dd class="ui_tpicker_'+d+'"><div class="ui_tpicker_'+d+'_slider"'+(b["show"+e]?"":i)+"></div>",b["show"+e]&&b[d+"Grid"]>0){if(j+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==d)for(var m=b[d+"Min"];f[d]>=m;m+=parseInt(b[d+"Grid"],10)){g[d]++;var n=$.datepicker.formatTime(useAmpm(b.pickerTimeFormat||b.timeFormat)?"hht":"HH",{hour:m},b);j+='<td data-for="'+d+'">'+n+"</td>"}else for(var o=b[d+"Min"];f[d]>=o;o+=parseInt(b[d+"Grid"],10))g[d]++,j+='<td data-for="'+d+'">'+(10>o?"0":"")+o+"</td>";j+="</tr></table></div>"}j+="</dd>"}j+='<dt class="ui_tpicker_timezone_label"'+(b.showTimezone?"":i)+">"+b.timezoneText+"</dt>",j+='<dd class="ui_tpicker_timezone" '+(b.showTimezone?"":i)+"></dd>",j+="</dl></div>";var p=$(j);b.timeOnly===!0&&(p.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+b.timeOnlyTitle+"</div>"+"</div>"),a.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());for(var k=0,l=c.units.length;l>k;k++)d=c.units[k],e=d.substr(0,1).toUpperCase()+d.substr(1),c[d+"_slider"]=c.control.create(c,p.find(".ui_tpicker_"+d+"_slider"),d,c[d],b[d+"Min"],f[d],b["step"+e]),b["show"+e]&&b[d+"Grid"]>0&&(h=100*g[d]*b[d+"Grid"]/(f[d]-b[d+"Min"]),p.find(".ui_tpicker_"+d+" table").css({width:h+"%",marginLeft:b.isRTL?"0":h/(-2*g[d])+"%",marginRight:b.isRTL?h/(-2*g[d])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var b=$(this),e=b.html(),f=parseInt(e.replace(/[^0-9]/g),10),g=e.replace(/[^apm]/gi),h=b.data("for");"hour"==h&&(-1!==g.indexOf("p")&&12>f?f+=12:-1!==g.indexOf("a")&&12===f&&(f=0)),c.control.value(c,c[h+"_slider"],d,f),c._onTimeChange(),c._onSelectHandler()}).css({cursor:"pointer",width:100/g[d]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=p.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(b.timezoneList,function(a){return $("<option />").val("object"==typeof a?a.value:a).text("object"==typeof a?a.label:a)})),this.timezone!==void 0&&null!==this.timezone&&""!==this.timezone){var q=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12),r=$.timepicker.timeZoneOffsetString(q);r==this.timezone?selectLocalTimeZone(c):this.timezone_select.val(this.timezone)}else this.hour!==void 0&&null!==this.hour&&""!==this.hour?this.timezone_select.val(b.defaultTimezone):selectLocalTimeZone(c);this.timezone_select.change(function(){c._defaults.useLocalTimezone=!1,c._onTimeChange(),c._onSelectHandler()});var s=a.find(".ui-datepicker-buttonpane");if(s.length?s.before(p):a.append(p),this.$timeObj=p.find(".ui_tpicker_time"),null!==this.inst){var t=this.timeDefined;this._onTimeChange(),this.timeDefined=t}if(this._defaults.addSliderAccess){var u=this._defaults.sliderAccessArgs,v=this._defaults.isRTL;u.isRTL=v,setTimeout(function(){if(0===p.find(".ui-slider-access").length){p.find(".ui-slider:visible").sliderAccess(u);var a=p.find(".ui-slider-access:eq(0)").outerWidth(!0);a&&p.find("table:visible").each(function(){var b=$(this),c=b.outerWidth(),d=(""+b.css(v?"marginRight":"marginLeft")).replace("%",""),e=c-a,f=d*e/c+"%",g={width:e,marginRight:0,marginLeft:0};g[v?"marginRight":"marginLeft"]=f,b.css(g)})}},10)}}},_limitMinMaxDateTime:function(a,b){var c=this._defaults,d=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(a,"minDateTime")&&void 0!==$.datepicker._get(a,"minDateTime")&&d){var e=$.datepicker._get(a,"minDateTime"),f=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal)&&(this.hourMinOriginal=c.hourMin,this.minuteMinOriginal=c.minuteMin,this.secondMinOriginal=c.secondMin,this.millisecMinOriginal=c.millisecMin),a.settings.timeOnly||f.getTime()==d.getTime()?(this._defaults.hourMin=e.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=e.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=e.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=e.getMilliseconds()):(this.millisec<this._defaults.millisecMin&&(this.millisec=this._defaults.millisecMin),this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)}if(null!==$.datepicker._get(a,"maxDateTime")&&void 0!==$.datepicker._get(a,"maxDateTime")&&d){var g=$.datepicker._get(a,"maxDateTime"),h=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)&&(this.hourMaxOriginal=c.hourMax,this.minuteMaxOriginal=c.minuteMax,this.secondMaxOriginal=c.secondMax,this.millisecMaxOriginal=c.millisecMax),a.settings.timeOnly||h.getTime()==d.getTime()?(this._defaults.hourMax=g.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=g.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=g.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=g.getMilliseconds()):(this.millisec>this._defaults.millisecMax&&(this.millisec=this._defaults.millisecMax),this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)}if(void 0!==b&&b===!0){var i=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),j=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),k=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),l=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:i}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:j}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:k}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:l}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec))}}},_onTimeChange:function(){var a=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,b=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,c=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,d=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,e=this.timezone_select?this.timezone_select.val():!1,f=this._defaults,g=f.pickerTimeFormat||f.timeFormat,h=f.pickerTimeSuffix||f.timeSuffix;"object"==typeof a&&(a=!1),"object"==typeof b&&(b=!1),"object"==typeof c&&(c=!1),"object"==typeof d&&(d=!1),"object"==typeof e&&(e=!1),a!==!1&&(a=parseInt(a,10)),b!==!1&&(b=parseInt(b,10)),c!==!1&&(c=parseInt(c,10)),d!==!1&&(d=parseInt(d,10));var i=f[12>a?"amNames":"pmNames"][0],j=a!=this.hour||b!=this.minute||c!=this.second||d!=this.millisec||this.ampm.length>0&&12>a!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null===this.timezone&&e!=this.defaultTimezone||null!==this.timezone&&e!=this.timezone;j&&(a!==!1&&(this.hour=a),b!==!1&&(this.minute=b),c!==!1&&(this.second=c),d!==!1&&(this.millisec=d),e!==!1&&(this.timezone=e),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),useAmpm(f.timeFormat)&&(this.ampm=i),this.formattedTime=$.datepicker.formatTime(f.timeFormat,this,f),this.$timeObj&&(g===f.timeFormat?this.$timeObj.text(this.formattedTime+h):this.$timeObj.text($.datepicker.formatTime(g,this,f)+h)),this.timeDefined=!0,j&&this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults.onSelect||this.inst.settings.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_updateDateTime:function(a){a=this.inst||a;var b=$.datepicker._daylightSavingAdjust(new Date(a.selectedYear,a.selectedMonth,a.selectedDay)),c=$.datepicker._get(a,"dateFormat"),d=$.datepicker._getFormatConfig(a),e=null!==b&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(c,null===b?new Date:b,d);var f=this.formattedDate;if(""==a.lastVal&&(a.currentYear=a.selectedYear,a.currentMonth=a.selectedMonth,a.currentDay=a.selectedDay),this._defaults.timeOnly===!0?f=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||e)&&(f+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=f,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(f);var g="",h=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,i=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;g=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===b?new Date:b,d):this.formattedDate,g&&(g+=h),g+=this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+i:this.formattedTime+i,this.$altInput.val(g)}else this.$input.val(f);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var a=$.datepicker._getInst(this.$input.get(0)),b=$.datepicker._get(a,"timepicker");if(b&&b._defaults.timeOnly&&a.input.val()!=a.lastVal)try{$.datepicker._updateDatepicker(a)}catch(c){$.timepicker.log(c)}}},_controls:{slider:{create:function(a,b,c,d,e,f,g){var h=a._defaults.isRTL;return b.prop("slide",null).slider({orientation:"horizontal",value:h?-1*d:d,min:h?-1*f:e,max:h?-1*e:f,step:g,slide:function(b,d){a.control.value(a,$(this),c,h?-1*d.value:d.value),a._onTimeChange()},stop:function(){a._onSelectHandler()}})},options:function(a,b,c,d,e){if(a._defaults.isRTL){if("string"==typeof d)return"min"==d||"max"==d?void 0!==e?b.slider(d,-1*e):Math.abs(b.slider(d)):b.slider(d);var f=d.min,g=d.max;return d.min=d.max=null,void 0!==f&&(d.max=-1*f),void 0!==g&&(d.min=-1*g),b.slider(d)}return"string"==typeof d&&void 0!==e?b.slider(d,e):b.slider(d)},value:function(a,b,c,d){return a._defaults.isRTL?void 0!==d?b.slider("value",-1*d):Math.abs(b.slider("value")):void 0!==d?b.slider("value",d):b.slider("value")}},select:{create:function(a,b,c,d,e,f,g){var h='<select class="ui-timepicker-select" data-unit="'+c+'" data-min="'+e+'" data-max="'+f+'" data-step="'+g+'">';-1!==a._defaults.timeFormat.indexOf("t")?"toLowerCase":"toUpperCase";for(var k=e;f>=k;k+=g)h+='<option value="'+k+'"'+(k==d?" selected":"")+">",h+="hour"==c&&useAmpm(a._defaults.pickerTimeFormat||a._defaults.timeFormat)?$.datepicker.formatTime("hh TT",{hour:k},a._defaults):"millisec"==c||k>=10?k:"0"+(""+k),h+="</option>";return h+="</select>",b.children("select").remove(),$(h).appendTo(b).change(function(){a._onTimeChange(),a._onSelectHandler()}),b},options:function(a,b,c,d,e){var f={},g=b.children("select");if("string"==typeof d){if(void 0===e)return g.data(d);f[d]=e}else f=d;return a.control.create(a,b,g.data("unit"),g.val(),f.min||g.data("min"),f.max||g.data("max"),f.step||g.data("step"))},value:function(a,b,c,d){var e=b.children("select");return void 0!==d?e.val(d):e.val()}}}}),$.fn.extend({timepicker:function(a){a=a||{};var b=Array.prototype.slice.call(arguments);return"object"==typeof a&&(b[0]=$.extend(a,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),b)})},datetimepicker:function(a){a=a||{};var b=arguments;return"string"==typeof a?"getDate"==a?$.fn.datepicker.apply($(this[0]),b):this.each(function(){var a=$(this);a.datepicker.apply(a,b)}):this.each(function(){var b=$(this);b.datepicker($.timepicker._newInst(b,a)._defaults)})}}),$.datepicker.parseDateTime=function(a,b,c,d,e){var f=parseDateTimeInternal(a,b,c,d,e);if(f.timeObj){var g=f.timeObj;f.date.setHours(g.hour,g.minute,g.second,g.millisec)}return f.date},$.datepicker.parseTime=function(a,b,c){var d=extendRemove(extendRemove({},$.timepicker._defaults),c||{}),e=function(a,b,c){var i,d=function(a,b){var c=[];return a&&$.merge(c,a),b&&$.merge(c,b),c=$.map(c,function(a){return a.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+c.join("|")+")?"},e=function(a){var b=a.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),c={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(b)for(var d=0;b.length>d;d++)-1==c[(""+b[d]).charAt(0)]&&(c[(""+b[d]).charAt(0)]=d+1);return c},f="^"+(""+a).replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(a){var b=a.length;switch(a.charAt(0).toLowerCase()){case"h":return 1===b?"(\\d?\\d)":"(\\d{"+b+"})";case"m":return 1===b?"(\\d?\\d)":"(\\d{"+b+"})";case"s":return 1===b?"(\\d?\\d)":"(\\d{"+b+"})";case"l":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return d(c.amNames,c.pmNames);default:return"("+a.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(a){return"\\"+a})+")?"}}).replace(/\s/g,"\\s?")+c.timeSuffix+"$",g=e(a),h="";i=b.match(RegExp(f,"i"));var j={hour:0,minute:0,second:0,millisec:0};if(i){if(-1!==g.t&&(void 0===i[g.t]||0===i[g.t].length?(h="",j.ampm=""):(h=-1!==$.inArray(i[g.t].toUpperCase(),c.amNames)?"AM":"PM",j.ampm=c["AM"==h?"amNames":"pmNames"][0])),-1!==g.h&&(j.hour="AM"==h&&"12"==i[g.h]?0:"PM"==h&&"12"!=i[g.h]?parseInt(i[g.h],10)+12:Number(i[g.h])),-1!==g.m&&(j.minute=Number(i[g.m])),-1!==g.s&&(j.second=Number(i[g.s])),-1!==g.l&&(j.millisec=Number(i[g.l])),-1!==g.z&&void 0!==i[g.z]){var k=i[g.z].toUpperCase();switch(k.length){case 1:k=c.timezoneIso8601?"Z":"+0000";break;case 5:c.timezoneIso8601&&(k="0000"==k.substring(1)?"Z":k.substring(0,3)+":"+k.substring(3));break;case 6:c.timezoneIso8601?"00:00"==k.substring(1)&&(k="Z"):k="Z"==k||"00:00"==k.substring(1)?"+0000":k.replace(/:/,"")}j.timezone=k}return j}return!1},f=function(a,b,c){try{var d=new Date("2012-01-01 "+b);if(isNaN(d.getTime())&&(d=new Date("2012-01-01T"+b),isNaN(d.getTime())&&(d=new Date("01/01/2012 "+b),isNaN(d.getTime()))))throw"Unable to parse time with native Date: "+b;return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),timezone:$.timepicker.timeZoneOffsetString(d)}}catch(f){try{return e(a,b,c)}catch(g){$.timepicker.log("Unable to parse \ntimeString: "+b+"\ntimeFormat: "+a)}}return!1};return"function"==typeof d.parse?d.parse(a,b,d):"loose"===d.parse?f(a,b,d):e(a,b,d)},$.datepicker.formatTime=function(a,b,c){c=c||{},c=$.extend({},$.timepicker._defaults,c),b=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},b);var d=a,e=c.amNames[0],f=parseInt(b.hour,10);return f>11&&(e=c.pmNames[0]),d=d.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g,function(a){switch(a){case"HH":return("0"+f).slice(-2);case"H":return f;case"hh":return("0"+convert24to12(f)).slice(-2);case"h":return convert24to12(f);case"mm":return("0"+b.minute).slice(-2);case"m":return b.minute;case"ss":return("0"+b.second).slice(-2);case"s":return b.second;case"l":return("00"+b.millisec).slice(-3);case"z":return null===b.timezone?c.defaultTimezone:b.timezone;case"T":return e.charAt(0).toUpperCase();case"TT":return e.toUpperCase();case"t":return e.charAt(0).toLowerCase();case"tt":return e.toLowerCase();default:return a.replace(/\'/g,"")||"'"}}),d=$.trim(d)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(a,b){var c=this._getInst($(a)[0]),d=this._get(c,"timepicker");d?(d._limitMinMaxDateTime(c,!0),c.inline=c.stay_open=!0,this._base_selectDate(a,b),c.inline=c.stay_open=!1,this._notifyChange(c),this._updateDatepicker(c)):this._base_selectDate(a,b)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(a){var b=a.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=a&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=b||"boolean"==typeof a.stay_open&&a.stay_open!==!1)){this._base_updateDatepicker(a);var c=this._get(a,"timepicker");c&&c._addTimePicker(a)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(a){var b=$.datepicker._getInst(a.target),c=$.datepicker._get(b,"timepicker");if(c&&$.datepicker._get(b,"constrainInput")){var d=useAmpm(c._defaults.timeFormat),e=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),f=(""+c._defaults.timeFormat).replace(/[hms]/g,"").replace(/TT/g,d?"APM":"").replace(/Tt/g,d?"AaPpMm":"").replace(/tT/g,d?"AaPpMm":"").replace(/T/g,d?"AP":"").replace(/tt/g,d?"apm":"").replace(/t/g,d?"ap":"")+" "+c._defaults.separator+c._defaults.timeSuffix+(c._defaults.showTimezone?c._defaults.timezoneList.join(""):"")+c._defaults.amNames.join("")+c._defaults.pmNames.join("")+e,g=String.fromCharCode(void 0===a.charCode?a.keyCode:a.charCode);return a.ctrlKey||" ">g||!e||f.indexOf(g)>-1}return $.datepicker._base_doKeyPress(a)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(a){var b=this._get(a,"timepicker");if(b){var c=b._defaults.altField;if(c){var e=(b._defaults.altFormat||b._defaults.dateFormat,this._getDate(a)),f=$.datepicker._getFormatConfig(a),g="",h=b._defaults.altSeparator?b._defaults.altSeparator:b._defaults.separator,i=b._defaults.altTimeSuffix?b._defaults.altTimeSuffix:b._defaults.timeSuffix,j=null!==b._defaults.altTimeFormat?b._defaults.altTimeFormat:b._defaults.timeFormat;g+=$.datepicker.formatTime(j,b,b._defaults)+i,b._defaults.timeOnly||b._defaults.altFieldTimeOnly||null===e||(g=b._defaults.altFormat?$.datepicker.formatDate(b._defaults.altFormat,e,f)+h+g:b.formattedDate+h+g),$(c).val(g)}}else $.datepicker._base_updateAlternate(a)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(a){var b=$.datepicker._getInst(a.target),c=$.datepicker._get(b,"timepicker");if(c&&c._defaults.timeOnly&&b.input.val()!=b.lastVal)try{$.datepicker._updateDatepicker(b)}catch(d){$.timepicker.log(d)}return $.datepicker._base_doKeyUp(a)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(a){var b=this._getInst($(a)[0]),c=b.dpDiv;this._base_gotoToday(a);var d=this._get(b,"timepicker");selectLocalTimeZone(d);var e=new Date;this._setTime(b,e),$(".ui-datepicker-today",c).click()},$.datepicker._disableTimepickerDatepicker=function(a){var b=this._getInst(a);if(b){var c=this._get(b,"timepicker");$(a).datepicker("getDate"),c&&(c._defaults.showTimepicker=!1,c._updateDateTime(b))}},$.datepicker._enableTimepickerDatepicker=function(a){var b=this._getInst(a);if(b){var c=this._get(b,"timepicker");$(a).datepicker("getDate"),c&&(c._defaults.showTimepicker=!0,c._addTimePicker(b),c._updateDateTime(b))}},$.datepicker._setTime=function(a,b){var c=this._get(a,"timepicker");if(c){var d=c._defaults;c.hour=b?b.getHours():d.hour,c.minute=b?b.getMinutes():d.minute,c.second=b?b.getSeconds():d.second,c.millisec=b?b.getMilliseconds():d.millisec,c._limitMinMaxDateTime(a,!0),c._onTimeChange(),c._updateDateTime(a)}},$.datepicker._setTimeDatepicker=function(a,b,c){var d=this._getInst(a);if(d){var e=this._get(d,"timepicker");if(e){this._setDateFromField(d);var f;b&&("string"==typeof b?(e._parseTime(b,c),f=new Date,f.setHours(e.hour,e.minute,e.second,e.millisec)):f=new Date(b.getTime()),"Invalid Date"==""+f&&(f=void 0),this._setTime(d,f))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(a,b){var c=this._getInst(a);if(c){var d=b instanceof Date?new Date(b.getTime()):b;this._updateDatepicker(c),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(a,d,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(a,b){var c=this._getInst(a);if(c){var d=this._get(c,"timepicker");if(d){void 0===c.lastVal&&this._setDateFromField(c,b);var e=this._getDate(c);return e&&d._parseTime($(a).val(),d.timeOnly)&&e.setHours(d.hour,d.minute,d.second,d.millisec),e}return this._base_getDateDatepicker(a,b)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(a,b,c){var d;try{d=this._base_parseDate(a,b,c)}catch(e){d=this._base_parseDate(a,b.substring(0,b.length-(e.length-e.indexOf(":")-2)),c),$.timepicker.log("Error parsing the date string: "+e+"\ndate string = "+b+"\ndate format = "+a)}return d},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(a){var e=this._get(a,"timepicker");return e?(e._updateDateTime(a),e.$input.val()):this._base_formatDate(a)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(a,b,c){var e,d=this._getInst(a);if(!d)return null;var f=this._get(d,"timepicker");if(f){var l,g=null,h=null,i=null,j=f._defaults.evnts,k={};if("string"==typeof b){if("minDate"===b||"minDateTime"===b)g=c;else if("maxDate"===b||"maxDateTime"===b)h=c;else if("onSelect"===b)i=c;else if(j.hasOwnProperty(b)){if(c===void 0)return j[b];k[b]=c,e={}}}else if("object"==typeof b){b.minDate?g=b.minDate:b.minDateTime?g=b.minDateTime:b.maxDate?h=b.maxDate:b.maxDateTime&&(h=b.maxDateTime);for(l in j)j.hasOwnProperty(l)&&b[l]&&(k[l]=b[l])}for(l in k)k.hasOwnProperty(l)&&(j[l]=k[l],e||(e=$.extend({},b)),delete e[l]);if(e&&isEmptyObject(e))return;g?(g=0===g?new Date:new Date(g),f._defaults.minDate=g,f._defaults.minDateTime=g):h?(h=0===h?new Date:new Date(h),f._defaults.maxDate=h,f._defaults.maxDateTime=h):i&&(f._defaults.onSelect=i)}return void 0===c?this._base_optionDatepicker.call($.datepicker,a,b):this._base_optionDatepicker.call($.datepicker,a,e||b,c)};var isEmptyObject=function(a){var b;for(b in a)if(a.hasOwnProperty(a))return!1;return!0},extendRemove=function(a,b){$.extend(a,b);for(var c in b)(null===b[c]||void 0===b[c])&&(a[c]=b[c]);return a},useAmpm=function(a){return-1!==a.indexOf("t")&&-1!==a.indexOf("h")},convert24to12=function(a){return a>12&&(a-=12),0==a&&(a=12),a+""},splitDateTime=function(a,b,c,d){try{var e=d&&d.separator?d.separator:$.timepicker._defaults.separator,f=d&&d.timeFormat?d.timeFormat:$.timepicker._defaults.timeFormat,g=f.split(e),h=g.length,i=b.split(e),j=i.length;if(j>1)return[i.splice(0,j-h).join(e),i.splice(0,h).join(e)]}catch(k){if($.timepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+k+"\ndateTimeString"+b+"\ndateFormat = "+a+"\nseparator = "+d.separator+"\ntimeFormat = "+d.timeFormat),k.indexOf(":")>=0){var l=b.length-(k.length-k.indexOf(":")-2);return b.substring(l),[$.trim(b.substring(0,l)),$.trim(b.substring(l))]}throw k}return[b,""]},parseDateTimeInternal=function(a,b,c,d,e){var f,g=splitDateTime(a,c,d,e);if(f=$.datepicker._base_parseDate(a,g[0],d),""!==g[1]){var h=g[1],i=$.datepicker.parseTime(b,h,e);if(null===i)throw"Wrong time format";return{date:f,timeObj:i}}return{date:f}},selectLocalTimeZone=function(a,b){if(a&&a.timezone_select){a._defaults.useLocalTimezone=!0;var c=b!==void 0?b:new Date,d=$.timepicker.timeZoneOffsetString(c);a._defaults.timezoneIso8601&&(d=d.substring(0,3)+":"+d.substring(3)),a.timezone_select.val(d)
}};$.timepicker=new Timepicker,$.timepicker.timeZoneOffsetString=function(a){var b=-1*a.getTimezoneOffset(),c=b%60,d=(b-c)/60;return(b>=0?"+":"-")+("0"+(""+101*d)).slice(-2)+("0"+(""+101*c)).slice(-2)},$.timepicker.timeRange=function(a,b,c){return $.timepicker.handleRange("timepicker",a,b,c)},$.timepicker.dateTimeRange=function(a,b,c){$.timepicker.dateRange(a,b,c,"datetimepicker")},$.timepicker.dateRange=function(a,b,c,d){d=d||"datepicker",$.timepicker.handleRange(d,a,b,c)},$.timepicker.handleRange=function(a,b,c,d){function e(a,d,e){d.val()&&new Date(b.val())>new Date(c.val())&&d.val(e)}function f(b,c,d){if($(b).val()){var e=$(b)[a].call($(b),"getDate");e.getTime&&$(c)[a].call($(c),"option",d,e)}}return $.fn[a].call(b,$.extend({onClose:function(a){e(this,c,a)},onSelect:function(){f(this,c,"minDate")}},d,d.start)),$.fn[a].call(c,$.extend({onClose:function(a){e(this,b,a)},onSelect:function(){f(this,b,"maxDate")}},d,d.end)),"timepicker"!=a&&d.reformat&&$([b,c]).each(function(){var b=$(this)[a].call($(this),"option","dateFormat"),c=new Date($(this).val());$(this).val()&&c&&$(this).val($.datepicker.formatDate(b,c))}),e(b,c,b.val()),f(b,c,"minDate"),f(c,b,"maxDate"),$([b.get(0),c.get(0)])},$.timepicker.log=function(a){window.console&&console.log(a)},$.timepicker.version="1.2"}})(jQuery);
